@page
@model CreateProductModel

<form method="post" enctype="multipart/form-data" class="form-create-product">
    <div class="form-group">
        <label asp-for="Product.FormFiles" class="drop-container" id="dropcontainer">
            <span class="drop-title">Drop files here</span>
            or
            <input asp-for="Product.FormFiles" type="file" multiple accept="image/png, image/jpeg, image/jpg" id="fileInput">
        </label>
        <span asp-validation-for="Product.FormFiles" class="text-danger"></span>
    </div>
    <div class="container-uploaded-img" id="divForUploadImages"></div>
    <div class="form-group">
        <label asp-for="Product.Name" class="control-label"></label>
        <input asp-for="Product.Name" class="form-control" />
        <span asp-validation-for="Product.Name" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Product.Descriprion" class="control-label"></label>
        <textarea asp-for="Product.Descriprion" class="form-control"></textarea>
        <span asp-validation-for="Product.Descriprion" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Product.Price" class="control-label"></label>
        <input asp-for="Product.Price" class="form-control" />
        <span asp-validation-for="Product.Price" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Product.TypeId" class="form-label"></label>
        <select asp-for="Product.TypeId" class="form-control" asp-items="ViewBag.TypeId">
            <option value=""></option>
        </select>
        <span asp-validation-for="Product.TypeId" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Product.SizeId" class="control-label"></label>
        <select asp-for="Product.SizeId" class="form-control" asp-items="ViewBag.SizeId">
            <option value=""></option>
        </select>
        <span asp-validation-for="Product.SizeId" class="text-danger"></span>
    </div>
    <div>
        <button id="create-product" type="submit" class="w-100 btn btn-lg btn-primary">Create</button>
    </div>
    <div asp-validation-summary="All" class="text-danger"></div>
</form>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
<script>
    let fileInput = document.getElementById('fileInput');
    let divForImg = document.getElementById('divForUploadImages');

    window.addEventListener('pageshow', function() {
        divForImg.innerHTML = "";
        file.addFormFileImages(fileInput, divForImg);
    });

    document.getElementById('fileInput').onchange = function () {
        divForImg.innerHTML = "";
        file.addFormFileImages(fileInput, divForImg);
    };

</script>